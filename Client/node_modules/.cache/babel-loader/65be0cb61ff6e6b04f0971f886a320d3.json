{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _toArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _menuContent = _interopRequireDefault(require(\"./menuContent\"));\n\nvar _context = require(\"./context\");\n\nvar _utils = require(\"./utils\");\n\nvar _constants = require(\"./../../libs/constants\");\n\nvar _container = _interopRequireDefault(require(\"./styled/container\"));\n\nvar _dropdown = _interopRequireDefault(require(\"./styled/dropdown\"));\n\nvar _content = _interopRequireDefault(require(\"./styled/content\"));\n\nvar PrimitiveMenu = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(PrimitiveMenu, _Component);\n\n  function PrimitiveMenu(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, PrimitiveMenu);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(PrimitiveMenu).call(this, props));\n    _this.containerRef = _react[\"default\"].createRef();\n    _this.triggerRef = _react[\"default\"].createRef();\n    _this.toggleMenu = _this.toggleMenu.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyEscapePressed = _this.handleKeyEscapePressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyPressed = _this.handleKeyPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyDownPressed = _this.handleKeyDownPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyUpPressed = _this.handleKeyUpPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyEnterPressed = _this.handleKeyEnterPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleClick = _this.handleClick.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.closeMenu = _this.closeMenu.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.hoverChild = _this.hoverChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.registerChild = _this.registerChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.unregisterChild = _this.unregisterChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.state = {\n      isOpen: false,\n      childrenRefs: [],\n      childFocusedIndex: -1,\n      context: {\n        privateOnClose: _this.closeMenu,\n        privateRegisterChild: _this.registerChild,\n        privateUnregisterChild: _this.unregisterChild,\n        privateOnHover: _this.hoverChild\n      }\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(PrimitiveMenu, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('click', this.handleClick);\n      window.removeEventListener('touchstart', this.handleClick);\n    }\n  }, {\n    key: \"focusChild\",\n    value: function focusChild(index) {\n      var isLoading = this.props.isLoading;\n      var childrenRefs = this.state.childrenRefs;\n\n      if (isLoading || !childrenRefs[index]) {\n        return null;\n      }\n\n      this.setState({\n        childFocusedIndex: index\n      });\n      return childrenRefs[index].focus();\n    }\n  }, {\n    key: \"handleKeyEscapePressed\",\n    value: function handleKeyEscapePressed() {\n      this.toggleMenu();\n      return this.triggerRef.current.focus();\n    }\n  }, {\n    key: \"handleKeyDownPressed\",\n    value: function handleKeyDownPressed() {\n      var _this$state = this.state,\n          childrenRefs = _this$state.childrenRefs,\n          childFocusedIndex = _this$state.childFocusedIndex;\n      var lastChild = childrenRefs.length - 1;\n      var isLastChild = childFocusedIndex === lastChild;\n      var isBetweenFirstAndLast = childFocusedIndex >= 0 && !isLastChild;\n      var isInvalidIndexOrLast = childFocusedIndex === -1 || isLastChild;\n\n      if (isBetweenFirstAndLast) {\n        return this.focusChild(childFocusedIndex + 1);\n      }\n\n      if (isInvalidIndexOrLast) {\n        return this.focusChild(0);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleKeyUpPressed\",\n    value: function handleKeyUpPressed() {\n      var _this$state2 = this.state,\n          childrenRefs = _this$state2.childrenRefs,\n          childFocusedIndex = _this$state2.childFocusedIndex;\n      var isFirstChild = childFocusedIndex === 0;\n      var isValidIndexGreaterThanFirst = childFocusedIndex >= 0 && !isFirstChild;\n      var isInvalidIndexOrFirst = childFocusedIndex === -1 || isFirstChild;\n      var lastChild = childrenRefs.length - 1;\n\n      if (isValidIndexGreaterThanFirst) {\n        return this.focusChild(childFocusedIndex - 1);\n      }\n\n      if (isInvalidIndexOrFirst) {\n        return this.focusChild(lastChild);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleKeyEnterPressed\",\n    value: function handleKeyEnterPressed() {\n      var _this$state3 = this.state,\n          childrenRefs = _this$state3.childrenRefs,\n          childFocusedIndex = _this$state3.childFocusedIndex;\n      var isValidIndex = childFocusedIndex >= 0;\n\n      if (isValidIndex) {\n        return childrenRefs[childFocusedIndex].click();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"focusMatchedItem\",\n    value: function focusMatchedItem(matchedItem) {\n      var childrenRefs = this.state.childrenRefs;\n      var itemIndex = (0, _utils.findItemIndex)(childrenRefs, matchedItem);\n      return this.focusChild(itemIndex);\n    }\n  }, {\n    key: \"findItemByKeyPressed\",\n    value: function findItemByKeyPressed(key) {\n      var _this$state4 = this.state,\n          childrenRefs = _this$state4.childrenRefs,\n          childFocusedIndex = _this$state4.childFocusedIndex,\n          matchedKeyPressed = _this$state4.matchedKeyPressed;\n\n      if (matchedKeyPressed) {\n        var _newChildrenRefs = childrenRefs.slice(childFocusedIndex + 1);\n\n        var _matchedItem = (0, _utils.findItemByKey)(key, _newChildrenRefs);\n\n        if (_matchedItem) {\n          return this.focusMatchedItem(_matchedItem);\n        }\n\n        var newMatchedItem = (0, _utils.findItemByKey)(key, childrenRefs);\n        if (newMatchedItem) this.focusChild((0, _utils.findItemIndex)(childrenRefs, newMatchedItem));\n        return null;\n      }\n\n      var newChildrenRefs = childrenRefs.slice(childFocusedIndex + 1);\n      var matchedItem = (0, _utils.findItemByKey)(key, newChildrenRefs);\n\n      if (matchedItem) {\n        this.setState({\n          matchedKeyPressed: key\n        });\n        return this.focusMatchedItem(matchedItem);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleKeyPressed\",\n    value: function handleKeyPressed(event) {\n      var isOpen = this.state.isOpen;\n\n      if (isOpen) {\n        var _keyHandlerMap;\n\n        if (event.keyCode !== _constants.TAB_KEY) event.preventDefault();\n        var keyHandlerMap = (_keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.DOWN_KEY, this.handleKeyDownPressed), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.UP_KEY, this.handleKeyUpPressed), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ESCAPE_KEY, this.handleKeyEscapePressed), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.TAB_KEY, this.toggleMenu), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ENTER_KEY, this.handleKeyEnterPressed), _keyHandlerMap);\n\n        if (keyHandlerMap[event.keyCode]) {\n          return keyHandlerMap[event.keyCode]();\n        }\n\n        return this.findItemByKeyPressed(event.key);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"registerChild\",\n    value: function registerChild(childRef) {\n      var childrenRefs = this.state.childrenRefs;\n\n      var _getChildMenuItemNode = (0, _utils.getChildMenuItemNodes)(this.containerRef.current),\n          _getChildMenuItemNode2 = (0, _toArray2[\"default\"])(_getChildMenuItemNode),\n          nodes = _getChildMenuItemNode2.slice(0);\n\n      var newChildrenRefs = (0, _utils.insertChildOrderly)(childrenRefs, childRef, nodes);\n      this.setState({\n        childrenRefs: newChildrenRefs\n      });\n    }\n  }, {\n    key: \"unregisterChild\",\n    value: function unregisterChild(childRef) {\n      var childrenRefs = this.state.childrenRefs;\n      var newChildrenRefs = childrenRefs.filter(function (child) {\n        return child !== childRef;\n      });\n      this.setState({\n        childrenRefs: newChildrenRefs\n      });\n    }\n  }, {\n    key: \"hoverChild\",\n    value: function hoverChild(event, childRef) {\n      return this.focusMatchedItem(childRef);\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(event) {\n      var isClickInsidePrimitiveMenu = this.containerRef.current.contains(event.target);\n\n      if (isClickInsidePrimitiveMenu) {\n        return null;\n      }\n\n      return this.closeMenu();\n    }\n  }, {\n    key: \"openMenu\",\n    value: function openMenu() {\n      var _this2 = this;\n\n      window.addEventListener('click', this.handleClick);\n      window.addEventListener('touchstart', this.handleClick);\n      setTimeout(function () {\n        return _this2.focusChild(0);\n      }, 0);\n      return this.setState({\n        isOpen: true\n      });\n    }\n  }, {\n    key: \"closeMenu\",\n    value: function closeMenu() {\n      window.removeEventListener('click', this.handleClick);\n      window.removeEventListener('touchstart', this.handleClick);\n      return this.setState({\n        isOpen: false,\n        childFocusedIndex: -1\n      });\n    }\n  }, {\n    key: \"toggleMenu\",\n    value: function toggleMenu() {\n      var isOpen = this.state.isOpen;\n\n      if (isOpen) {\n        return this.closeMenu();\n      }\n\n      return this.openMenu();\n    }\n    /**\n     * Sets focus on the element.\n     * @public\n     */\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.triggerRef.current.focus();\n    }\n    /**\n     * Sets click on the element.\n     * @public\n     */\n\n  }, {\n    key: \"click\",\n    value: function click() {\n      this.triggerRef.current.click();\n    }\n    /**\n     * Sets blur on the element.\n     * @public\n     */\n\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.triggerRef.current.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          style = _this$props.style,\n          title = _this$props.title,\n          assistiveText = _this$props.assistiveText,\n          isLoading = _this$props.isLoading,\n          children = _this$props.children,\n          id = _this$props.id,\n          className = _this$props.className,\n          menuAlignment = _this$props.menuAlignment,\n          menuSize = _this$props.menuSize,\n          Trigger = _this$props.trigger,\n          rest = (0, _objectWithoutProperties2[\"default\"])(_this$props, [\"style\", \"title\", \"assistiveText\", \"isLoading\", \"children\", \"id\", \"className\", \"menuAlignment\", \"menuSize\", \"trigger\"]);\n      var _this$state5 = this.state,\n          context = _this$state5.context,\n          isOpen = _this$state5.isOpen;\n      var ariaLabel = title || assistiveText;\n      return _react[\"default\"].createElement(_container[\"default\"], {\n        id: id,\n        role: \"presentation\",\n        className: className,\n        style: style,\n        onKeyDown: this.handleKeyPressed,\n        ref: this.containerRef\n      }, _react[\"default\"].createElement(Trigger, (0, _extends2[\"default\"])({}, rest, {\n        isOpen: isOpen,\n        title: title,\n        ariaExpanded: isOpen,\n        ariaHaspopup: true,\n        assistiveText: assistiveText,\n        onClick: this.toggleMenu,\n        ref: this.triggerRef\n      })), _react[\"default\"].createElement(_dropdown[\"default\"], {\n        \"data-id\": \"primitive-menu_dropdown\",\n        menuSize: menuSize,\n        menuAlignment: menuAlignment,\n        isLoading: isLoading,\n        isOpen: isOpen\n      }, _react[\"default\"].createElement(_content[\"default\"], {\n        role: \"menu\",\n        \"aria-label\": ariaLabel\n      }, _react[\"default\"].createElement(_menuContent[\"default\"], {\n        isLoading: isLoading\n      }, _react[\"default\"].createElement(_context.Provider, {\n        value: context\n      }, children)))));\n    }\n  }]);\n  return PrimitiveMenu;\n}(_react.Component);\n\nexports[\"default\"] = PrimitiveMenu;\nPrimitiveMenu.propTypes = {\n  /** The content of the PrimitiveMenu. Used to render the menuItem elements\n   * when the PrimitiveMenu is open. */\n  children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].arrayOf(_propTypes[\"default\"].node), _propTypes[\"default\"].object]),\n\n  /** The size of the menu. Options include xx-small, x-small, medium, or large.\n   * This value defaults to xx-small. */\n  menuSize: _propTypes[\"default\"].oneOf(['xx-small', 'x-small', 'small', 'medium', 'large']),\n\n  /** Determines the alignment of the menu relative to the trigger element.\n   * Available options are: left, center, right, bottom, bottom-left, bottom-right.\n   * This value defaults to left. */\n  menuAlignment: _propTypes[\"default\"].oneOf(['left', 'right', 'bottom', 'center', 'bottom-right', 'bottom-left']),\n\n  /** If is set to true, then is showed a loading symbol. */\n  isLoading: _propTypes[\"default\"].bool,\n\n  /** Displays tooltip text when the mouse moves over the element. */\n  title: _propTypes[\"default\"].string,\n\n  /** A description for assistive sreen readers. */\n  assistiveText: _propTypes[\"default\"].string,\n\n  /** A CSS class for the outer element, in addition to the component's base classes. */\n  className: _propTypes[\"default\"].string,\n\n  /** An object with custom style applied to the outer element. */\n  style: _propTypes[\"default\"].object,\n\n  /** The id of the outer element. */\n  id: _propTypes[\"default\"].string,\n\n  /** The trigger element. */\n  trigger: _propTypes[\"default\"].func.isRequired\n};\nPrimitiveMenu.defaultProps = {\n  children: null,\n  menuSize: 'xx-small',\n  menuAlignment: 'left',\n  isLoading: false,\n  title: undefined,\n  assistiveText: undefined,\n  className: undefined,\n  style: undefined,\n  id: undefined\n};","map":{"version":3,"sources":["/home/sharad_bagmar/go/src/github.com/nirbhaybagmar9/aws_go/Client/node_modules/react-rainbow-components/components/PrimitiveMenu/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_extends2","_objectWithoutProperties2","_toArray2","_defineProperty2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_react","_propTypes","_menuContent","_context","_utils","_constants","_container","_dropdown","_content","PrimitiveMenu","_Component","props","_this","call","containerRef","createRef","triggerRef","toggleMenu","bind","handleKeyEscapePressed","handleKeyPressed","handleKeyDownPressed","handleKeyUpPressed","handleKeyEnterPressed","handleClick","closeMenu","hoverChild","registerChild","unregisterChild","state","isOpen","childrenRefs","childFocusedIndex","context","privateOnClose","privateRegisterChild","privateUnregisterChild","privateOnHover","key","componentWillUnmount","window","removeEventListener","focusChild","index","isLoading","setState","focus","current","_this$state","lastChild","length","isLastChild","isBetweenFirstAndLast","isInvalidIndexOrLast","_this$state2","isFirstChild","isValidIndexGreaterThanFirst","isInvalidIndexOrFirst","_this$state3","isValidIndex","click","focusMatchedItem","matchedItem","itemIndex","findItemIndex","findItemByKeyPressed","_this$state4","matchedKeyPressed","_newChildrenRefs","slice","_matchedItem","findItemByKey","newMatchedItem","newChildrenRefs","event","_keyHandlerMap","keyCode","TAB_KEY","preventDefault","keyHandlerMap","DOWN_KEY","UP_KEY","ESCAPE_KEY","ENTER_KEY","childRef","_getChildMenuItemNode","getChildMenuItemNodes","_getChildMenuItemNode2","nodes","insertChildOrderly","filter","child","isClickInsidePrimitiveMenu","contains","target","openMenu","_this2","addEventListener","setTimeout","blur","render","_this$props","style","title","assistiveText","children","id","className","menuAlignment","menuSize","Trigger","trigger","rest","_this$state5","ariaLabel","createElement","role","onKeyDown","ref","ariaExpanded","ariaHaspopup","onClick","Provider","Component","propTypes","oneOfType","arrayOf","node","object","oneOf","bool","string","func","isRequired","defaultProps","undefined"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _toArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _menuContent = _interopRequireDefault(require(\"./menuContent\"));\n\nvar _context = require(\"./context\");\n\nvar _utils = require(\"./utils\");\n\nvar _constants = require(\"./../../libs/constants\");\n\nvar _container = _interopRequireDefault(require(\"./styled/container\"));\n\nvar _dropdown = _interopRequireDefault(require(\"./styled/dropdown\"));\n\nvar _content = _interopRequireDefault(require(\"./styled/content\"));\n\nvar PrimitiveMenu =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(PrimitiveMenu, _Component);\n\n  function PrimitiveMenu(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, PrimitiveMenu);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(PrimitiveMenu).call(this, props));\n    _this.containerRef = _react[\"default\"].createRef();\n    _this.triggerRef = _react[\"default\"].createRef();\n    _this.toggleMenu = _this.toggleMenu.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyEscapePressed = _this.handleKeyEscapePressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyPressed = _this.handleKeyPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyDownPressed = _this.handleKeyDownPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyUpPressed = _this.handleKeyUpPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyEnterPressed = _this.handleKeyEnterPressed.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleClick = _this.handleClick.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.closeMenu = _this.closeMenu.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.hoverChild = _this.hoverChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.registerChild = _this.registerChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.unregisterChild = _this.unregisterChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.state = {\n      isOpen: false,\n      childrenRefs: [],\n      childFocusedIndex: -1,\n      context: {\n        privateOnClose: _this.closeMenu,\n        privateRegisterChild: _this.registerChild,\n        privateUnregisterChild: _this.unregisterChild,\n        privateOnHover: _this.hoverChild\n      }\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(PrimitiveMenu, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('click', this.handleClick);\n      window.removeEventListener('touchstart', this.handleClick);\n    }\n  }, {\n    key: \"focusChild\",\n    value: function focusChild(index) {\n      var isLoading = this.props.isLoading;\n      var childrenRefs = this.state.childrenRefs;\n\n      if (isLoading || !childrenRefs[index]) {\n        return null;\n      }\n\n      this.setState({\n        childFocusedIndex: index\n      });\n      return childrenRefs[index].focus();\n    }\n  }, {\n    key: \"handleKeyEscapePressed\",\n    value: function handleKeyEscapePressed() {\n      this.toggleMenu();\n      return this.triggerRef.current.focus();\n    }\n  }, {\n    key: \"handleKeyDownPressed\",\n    value: function handleKeyDownPressed() {\n      var _this$state = this.state,\n          childrenRefs = _this$state.childrenRefs,\n          childFocusedIndex = _this$state.childFocusedIndex;\n      var lastChild = childrenRefs.length - 1;\n      var isLastChild = childFocusedIndex === lastChild;\n      var isBetweenFirstAndLast = childFocusedIndex >= 0 && !isLastChild;\n      var isInvalidIndexOrLast = childFocusedIndex === -1 || isLastChild;\n\n      if (isBetweenFirstAndLast) {\n        return this.focusChild(childFocusedIndex + 1);\n      }\n\n      if (isInvalidIndexOrLast) {\n        return this.focusChild(0);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleKeyUpPressed\",\n    value: function handleKeyUpPressed() {\n      var _this$state2 = this.state,\n          childrenRefs = _this$state2.childrenRefs,\n          childFocusedIndex = _this$state2.childFocusedIndex;\n      var isFirstChild = childFocusedIndex === 0;\n      var isValidIndexGreaterThanFirst = childFocusedIndex >= 0 && !isFirstChild;\n      var isInvalidIndexOrFirst = childFocusedIndex === -1 || isFirstChild;\n      var lastChild = childrenRefs.length - 1;\n\n      if (isValidIndexGreaterThanFirst) {\n        return this.focusChild(childFocusedIndex - 1);\n      }\n\n      if (isInvalidIndexOrFirst) {\n        return this.focusChild(lastChild);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleKeyEnterPressed\",\n    value: function handleKeyEnterPressed() {\n      var _this$state3 = this.state,\n          childrenRefs = _this$state3.childrenRefs,\n          childFocusedIndex = _this$state3.childFocusedIndex;\n      var isValidIndex = childFocusedIndex >= 0;\n\n      if (isValidIndex) {\n        return childrenRefs[childFocusedIndex].click();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"focusMatchedItem\",\n    value: function focusMatchedItem(matchedItem) {\n      var childrenRefs = this.state.childrenRefs;\n      var itemIndex = (0, _utils.findItemIndex)(childrenRefs, matchedItem);\n      return this.focusChild(itemIndex);\n    }\n  }, {\n    key: \"findItemByKeyPressed\",\n    value: function findItemByKeyPressed(key) {\n      var _this$state4 = this.state,\n          childrenRefs = _this$state4.childrenRefs,\n          childFocusedIndex = _this$state4.childFocusedIndex,\n          matchedKeyPressed = _this$state4.matchedKeyPressed;\n\n      if (matchedKeyPressed) {\n        var _newChildrenRefs = childrenRefs.slice(childFocusedIndex + 1);\n\n        var _matchedItem = (0, _utils.findItemByKey)(key, _newChildrenRefs);\n\n        if (_matchedItem) {\n          return this.focusMatchedItem(_matchedItem);\n        }\n\n        var newMatchedItem = (0, _utils.findItemByKey)(key, childrenRefs);\n        if (newMatchedItem) this.focusChild((0, _utils.findItemIndex)(childrenRefs, newMatchedItem));\n        return null;\n      }\n\n      var newChildrenRefs = childrenRefs.slice(childFocusedIndex + 1);\n      var matchedItem = (0, _utils.findItemByKey)(key, newChildrenRefs);\n\n      if (matchedItem) {\n        this.setState({\n          matchedKeyPressed: key\n        });\n        return this.focusMatchedItem(matchedItem);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleKeyPressed\",\n    value: function handleKeyPressed(event) {\n      var isOpen = this.state.isOpen;\n\n      if (isOpen) {\n        var _keyHandlerMap;\n\n        if (event.keyCode !== _constants.TAB_KEY) event.preventDefault();\n        var keyHandlerMap = (_keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.DOWN_KEY, this.handleKeyDownPressed), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.UP_KEY, this.handleKeyUpPressed), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ESCAPE_KEY, this.handleKeyEscapePressed), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.TAB_KEY, this.toggleMenu), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ENTER_KEY, this.handleKeyEnterPressed), _keyHandlerMap);\n\n        if (keyHandlerMap[event.keyCode]) {\n          return keyHandlerMap[event.keyCode]();\n        }\n\n        return this.findItemByKeyPressed(event.key);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"registerChild\",\n    value: function registerChild(childRef) {\n      var childrenRefs = this.state.childrenRefs;\n\n      var _getChildMenuItemNode = (0, _utils.getChildMenuItemNodes)(this.containerRef.current),\n          _getChildMenuItemNode2 = (0, _toArray2[\"default\"])(_getChildMenuItemNode),\n          nodes = _getChildMenuItemNode2.slice(0);\n\n      var newChildrenRefs = (0, _utils.insertChildOrderly)(childrenRefs, childRef, nodes);\n      this.setState({\n        childrenRefs: newChildrenRefs\n      });\n    }\n  }, {\n    key: \"unregisterChild\",\n    value: function unregisterChild(childRef) {\n      var childrenRefs = this.state.childrenRefs;\n      var newChildrenRefs = childrenRefs.filter(function (child) {\n        return child !== childRef;\n      });\n      this.setState({\n        childrenRefs: newChildrenRefs\n      });\n    }\n  }, {\n    key: \"hoverChild\",\n    value: function hoverChild(event, childRef) {\n      return this.focusMatchedItem(childRef);\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(event) {\n      var isClickInsidePrimitiveMenu = this.containerRef.current.contains(event.target);\n\n      if (isClickInsidePrimitiveMenu) {\n        return null;\n      }\n\n      return this.closeMenu();\n    }\n  }, {\n    key: \"openMenu\",\n    value: function openMenu() {\n      var _this2 = this;\n\n      window.addEventListener('click', this.handleClick);\n      window.addEventListener('touchstart', this.handleClick);\n      setTimeout(function () {\n        return _this2.focusChild(0);\n      }, 0);\n      return this.setState({\n        isOpen: true\n      });\n    }\n  }, {\n    key: \"closeMenu\",\n    value: function closeMenu() {\n      window.removeEventListener('click', this.handleClick);\n      window.removeEventListener('touchstart', this.handleClick);\n      return this.setState({\n        isOpen: false,\n        childFocusedIndex: -1\n      });\n    }\n  }, {\n    key: \"toggleMenu\",\n    value: function toggleMenu() {\n      var isOpen = this.state.isOpen;\n\n      if (isOpen) {\n        return this.closeMenu();\n      }\n\n      return this.openMenu();\n    }\n    /**\n     * Sets focus on the element.\n     * @public\n     */\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.triggerRef.current.focus();\n    }\n    /**\n     * Sets click on the element.\n     * @public\n     */\n\n  }, {\n    key: \"click\",\n    value: function click() {\n      this.triggerRef.current.click();\n    }\n    /**\n     * Sets blur on the element.\n     * @public\n     */\n\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.triggerRef.current.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          style = _this$props.style,\n          title = _this$props.title,\n          assistiveText = _this$props.assistiveText,\n          isLoading = _this$props.isLoading,\n          children = _this$props.children,\n          id = _this$props.id,\n          className = _this$props.className,\n          menuAlignment = _this$props.menuAlignment,\n          menuSize = _this$props.menuSize,\n          Trigger = _this$props.trigger,\n          rest = (0, _objectWithoutProperties2[\"default\"])(_this$props, [\"style\", \"title\", \"assistiveText\", \"isLoading\", \"children\", \"id\", \"className\", \"menuAlignment\", \"menuSize\", \"trigger\"]);\n      var _this$state5 = this.state,\n          context = _this$state5.context,\n          isOpen = _this$state5.isOpen;\n      var ariaLabel = title || assistiveText;\n      return _react[\"default\"].createElement(_container[\"default\"], {\n        id: id,\n        role: \"presentation\",\n        className: className,\n        style: style,\n        onKeyDown: this.handleKeyPressed,\n        ref: this.containerRef\n      }, _react[\"default\"].createElement(Trigger, (0, _extends2[\"default\"])({}, rest, {\n        isOpen: isOpen,\n        title: title,\n        ariaExpanded: isOpen,\n        ariaHaspopup: true,\n        assistiveText: assistiveText,\n        onClick: this.toggleMenu,\n        ref: this.triggerRef\n      })), _react[\"default\"].createElement(_dropdown[\"default\"], {\n        \"data-id\": \"primitive-menu_dropdown\",\n        menuSize: menuSize,\n        menuAlignment: menuAlignment,\n        isLoading: isLoading,\n        isOpen: isOpen\n      }, _react[\"default\"].createElement(_content[\"default\"], {\n        role: \"menu\",\n        \"aria-label\": ariaLabel\n      }, _react[\"default\"].createElement(_menuContent[\"default\"], {\n        isLoading: isLoading\n      }, _react[\"default\"].createElement(_context.Provider, {\n        value: context\n      }, children)))));\n    }\n  }]);\n  return PrimitiveMenu;\n}(_react.Component);\n\nexports[\"default\"] = PrimitiveMenu;\nPrimitiveMenu.propTypes = {\n  /** The content of the PrimitiveMenu. Used to render the menuItem elements\n   * when the PrimitiveMenu is open. */\n  children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].arrayOf(_propTypes[\"default\"].node), _propTypes[\"default\"].object]),\n\n  /** The size of the menu. Options include xx-small, x-small, medium, or large.\n   * This value defaults to xx-small. */\n  menuSize: _propTypes[\"default\"].oneOf(['xx-small', 'x-small', 'small', 'medium', 'large']),\n\n  /** Determines the alignment of the menu relative to the trigger element.\n   * Available options are: left, center, right, bottom, bottom-left, bottom-right.\n   * This value defaults to left. */\n  menuAlignment: _propTypes[\"default\"].oneOf(['left', 'right', 'bottom', 'center', 'bottom-right', 'bottom-left']),\n\n  /** If is set to true, then is showed a loading symbol. */\n  isLoading: _propTypes[\"default\"].bool,\n\n  /** Displays tooltip text when the mouse moves over the element. */\n  title: _propTypes[\"default\"].string,\n\n  /** A description for assistive sreen readers. */\n  assistiveText: _propTypes[\"default\"].string,\n\n  /** A CSS class for the outer element, in addition to the component's base classes. */\n  className: _propTypes[\"default\"].string,\n\n  /** An object with custom style applied to the outer element. */\n  style: _propTypes[\"default\"].object,\n\n  /** The id of the outer element. */\n  id: _propTypes[\"default\"].string,\n\n  /** The trigger element. */\n  trigger: _propTypes[\"default\"].func.isRequired\n};\nPrimitiveMenu.defaultProps = {\n  children: null,\n  menuSize: 'xx-small',\n  menuAlignment: 'left',\n  isLoading: false,\n  title: undefined,\n  assistiveText: undefined,\n  className: undefined,\n  style: undefined,\n  id: undefined\n};"]},"metadata":{},"sourceType":"script"}